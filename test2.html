<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Touch Game</title>
    <style>
        body {
            margin: 0;
            overflow: hidden;
        }

        canvas {
            display: block;
        }

        #score {
            position: absolute;
            top: 10px;
            left: 10px;
            color: #fff;
            font-size: 20px;
        }
    </style>
</head>
<body>

<canvas id="gameCanvas" width="400" height="600"></canvas>
<div id="score">Score: 0</div>

<script>
    const canvas = document.getElementById('gameCanvas');
    const ctx = canvas.getContext('2d');

    const character = {
        x: canvas.width / 2,
        y: canvas.height - 50,
        width: 50,
        height: 50,
        speed: 5
    };

    const fallingObjects = [];
    let score = 0;

    function drawCharacter() {
        ctx.fillStyle = '#00f';
        ctx.fillRect(character.x, character.y, character.width, character.height);
    }

    function drawFallingObjects() {
        ctx.fillStyle = '#f00';
        for (const obj of fallingObjects) {
            ctx.fillRect(obj.x, obj.y, obj.width, obj.height);
        }
    }

    function update() {
        // Move character based on touch input
        canvas.addEventListener('touchmove', (event) => {
            character.x = event.touches[0].clientX - character.width / 2;
            // Prevent character from going out of the canvas
            if (character.x < 0) character.x = 0;
            if (character.x + character.width > canvas.width) character.x = canvas.width - character.width;
        });

        // Update falling objects
        for (const obj of fallingObjects) {
            obj.y += 5;
            // Check for collision with character
            if (
                obj.x < character.x + character.width &&
                obj.x + obj.width > character.x &&
                obj.y < character.y + character.height &&
                obj.y + obj.height > character.y
            ) {
                score++;
                resetObject(obj);
            }
            // Remove objects that go beyond the canvas
            if (obj.y > canvas.height) {
                resetObject(obj);
            }
        }
    }

    function draw() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        drawCharacter();
        drawFallingObjects();
        document.getElementById('score').textContent = 'Score: ' + score;
    }

    function resetObject(obj) {
        obj.y = 0;
        obj.x = Math.random() * (canvas.width - obj.width);
    }

    function spawnObjects() {
        setInterval(() => {
            const obj = {
                x: Math.random() * (canvas.width - 30),
                y: 0,
                width: 30,
                height: 30
            };
            fallingObjects.push(obj);
        }, 1000);
    }

    function gameLoop() {
        update();
        draw();
        requestAnimationFrame(gameLoop);
    }

    // Start the game loop and spawn falling objects
    gameLoop();
    spawnObjects();
</script>

</body>
</html>
